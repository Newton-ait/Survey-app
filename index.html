<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes" />
    <title>Uganda Mobility · Transport Survey App</title>
    <!-- Font & Icons (simple) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        :root {
            --primary: #0b3d5f;
            --primary-bright: #1e6f9c;
            --accent: #f39c12;
            --accent-soft: #f8c471;
            --bg-light: #f0f4fa;
            --card-white: #ffffff;
            --text-dark: #1e2a36;
            --text-soft: #4a5f6e;
            --border-light: #dce4ec;
            --success: #2ecc71;
            --shadow-sm: 0 8px 20px rgba(0,20,40,0.06);
            --radius-card: 24px;
            --radius-btn: 40px;
        }

        body {
            background-color: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.5;
            padding-bottom: 20px;
        }

        .app-container {
            max-width: 960px;
            margin: 0 auto;
            padding: 16px 20px;
        }

        /* header */
        .app-header {
            background: linear-gradient(145deg, #0a334a, #0f4a66);
            color: white;
            padding: 28px 24px;
            border-radius: 32px 32px 32px 0;
            box-shadow: var(--shadow-sm);
            margin-bottom: 28px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
        }
        .app-header h1 {
            font-size: 1.9rem;
            font-weight: 600;
            letter-spacing: -0.5px;
            line-height: 1.2;
        }
        .app-header h1 i {
            color: var(--accent);
            margin-right: 6px;
        }
        .header-badge {
            background: rgba(255,255,255,0.15);
            padding: 10px 16px;
            border-radius: 50px;
            font-size: 0.9rem;
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        /* welcome / intro */
        .welcome-card {
            background: var(--card-white);
            padding: 28px 24px;
            border-radius: var(--radius-card);
            box-shadow: var(--shadow-sm);
            margin-bottom: 28px;
            border-left: 6px solid var(--accent);
        }
        .welcome-card h2 {
            font-size: 1.6rem;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--primary);
        }
        .welcome-card p {
            color: var(--text-soft);
            margin-bottom: 12px;
            font-size: 1.05rem;
        }

        /* survey selection cards */
        .survey-grid {
            display: flex;
            gap: 24px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        .survey-card {
            flex: 1 1 280px;
            background: var(--card-white);
            border-radius: 28px;
            box-shadow: var(--shadow-sm);
            transition: all 0.2s ease;
            overflow: hidden;
            border: 1px solid rgba(0,0,0,0.02);
            cursor: pointer;
        }
        .survey-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 16px 30px rgba(11,61,95,0.12);
        }
        .card-header {
            padding: 26px 24px 16px;
            background: #f9fcff;
            border-bottom: 1px solid var(--border-light);
            display: flex;
            align-items: center;
            gap: 14px;
        }
        .card-header i {
            font-size: 2.4rem;
            color: var(--primary);
        }
        .card-header h3 {
            font-size: 1.6rem;
            font-weight: 600;
            color: var(--primary);
        }
        .card-body {
            padding: 20px 24px 28px;
        }
        .card-body ul {
            list-style: none;
            margin-bottom: 24px;
        }
        .card-body li {
            padding: 6px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #2e4053;
        }
        .card-body li i {
            color: var(--accent);
            font-size: 0.9rem;
            width: 18px;
            text-align: center;
        }
        .btn {
            display: inline-block;
            width: 100%;
            background: var(--primary);
            color: white;
            border: none;
            padding: 14px 20px;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 40px;
            transition: 0.2s;
            cursor: pointer;
            text-align: center;
            border: 1px solid transparent;
        }
        .btn i { margin-right: 8px; }
        .btn:hover {
            background: #1b5a7a;
            transform: scale(0.98);
        }
        .btn-accent {
            background: var(--accent);
            color: #1e2a36;
        }
        .btn-accent:hover { background: #e08e0b; }

        /* survey form */
        .survey-form {
            background: white;
            border-radius: 32px;
            padding: 28px 28px 36px;
            box-shadow: var(--shadow-sm);
            margin: 28px 0;
            border: 1px solid white;
        }
        .progress-container {
            background: #eaf0f6;
            height: 12px;
            border-radius: 20px;
            margin-bottom: 32px;
            overflow: hidden;
        }
        .progress-fill {
            height: 12px;
            background: linear-gradient(90deg, var(--primary), var(--primary-bright));
            width: 0%;
            transition: width 0.3s ease;
            border-radius: 20px;
        }
        .form-step {
            transition: 0.2s;
        }
        .form-group {
            margin-bottom: 28px;
        }
        .form-group label {
            display: block;
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 14px;
            color: #0a334a;
        }
        .radio-group, .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 14px;
            background: #f9fcff;
            padding: 20px 24px;
            border-radius: 24px;
        }
        .radio-option, .checkbox-option {
            display: flex;
            align-items: center;
            gap: 14px;
            font-size: 1.02rem;
        }
        input[type="radio"], input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: var(--primary);
            cursor: pointer;
        }
        select, input[type="text"] {
            width: 100%;
            padding: 15px 18px;
            border: 1px solid var(--border-light);
            border-radius: 30px;
            font-size: 1rem;
            background: white;
        }
        .rating-scale {
            display: flex;
            justify-content: space-around;
            background: #f9fcff;
            padding: 18px 12px;
            border-radius: 40px;
            margin-top: 12px;
            flex-wrap: wrap;
        }
        .rating-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            font-weight: 600;
        }
        .form-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 16px;
        }
        .form-navigation .btn {
            width: auto;
            min-width: 140px;
        }
        .hidden {
            display: none !important;
        }

        /* thank you screen */
        .thank-you-panel {
            background: white;
            border-radius: 40px;
            padding: 48px 32px;
            text-align: center;
            box-shadow: var(--shadow-sm);
            margin: 30px 0;
        }
        .thank-you-panel i {
            font-size: 5rem;
            color: var(--success);
            margin-bottom: 20px;
        }
        .thank-you-panel h2 {
            color: var(--primary);
            font-size: 2.2rem;
            margin-bottom: 16px;
        }
        .thank-you-panel p {
            font-size: 1.2rem;
            margin-bottom: 28px;
            color: var(--text-soft);
        }

        footer {
            margin-top: 40px;
            color: #6a7c89;
            text-align: center;
            font-size: 0.95rem;
            border-top: 1px dashed #cbd6e0;
            padding-top: 28px;
        }

        @media (max-width: 680px) {
            .app-header { flex-direction: column; align-items: flex-start; gap: 12px; }
            .form-navigation { flex-direction: column; }
            .form-navigation .btn { width: 100%; }
            .rating-scale { gap: 12px; }
        }
    </style>
</head>
<body>
    <div class="app-container">

        <!-- APP HEADER -->
        <header class="app-header">
            <h1><i class="fas fa-road"></i> MoveUganda</h1>
            <span class="header-badge"><i class="fas fa-clipboard-list"></i> University research • 2025</span>
        </header>

        <!-- DYNAMIC CONTENT: home screen, forms, thank you -->
        <div id="homeScreen">
            <div class="welcome-card">
                <h2><i class="fas fa-smile" style="color: #f39c12;"></i> Tugende Tugende!</h2>
                <p>This app helps us understand long‑distance travel in Uganda — from Kampala to Gulu, Mbarara, Mbale, and beyond. <strong>5 minutes, totally anonymous.</strong> Pick your role:</p>
            </div>

            <!-- SURVEY CARDS (selection) -->
            <div class="survey-grid">
                <!-- Passenger card -->
                <div class="survey-card" id="choosePassengerCard">
                    <div class="card-header">
                        <i class="fas fa-users"></i>
                        <h3>Passenger</h3>
                    </div>
                    <div class="card-body">
                        <ul>
                            <li><i class="fas fa-check-circle"></i> Frequency & destinations</li>
                            <li><i class="fas fa-check-circle"></i> Current transport</li>
                            <li><i class="fas fa-check-circle"></i> Frustrations & satisfaction</li>
                            <li><i class="fas fa-check-circle"></i> Interest in car‑pooling</li>
                        </ul>
                        <button class="btn" id="startPassengerBtn"><i class="fas fa-arrow-right"></i> Start passenger survey</button>
                    </div>
                </div>
                <!-- Driver card -->
                <div class="survey-card" id="chooseDriverCard">
                    <div class="card-header">
                        <i class="fas fa-car-side"></i>
                        <h3>Driver</h3>
                    </div>
                    <div class="card-body">
                        <ul>
                            <li><i class="fas fa-check-circle"></i> Car access & frequency</li>
                            <li><i class="fas fa-check-circle"></i> Empty seats & lift history</li>
                            <li><i class="fas fa-check-circle"></i> Interest in ride‑sharing</li>
                            <li><i class="fas fa-check-circle"></i> Safety & preferences</li>
                        </ul>
                        <button class="btn btn-accent" id="startDriverBtn"><i class="fas fa-arrow-right"></i> Start driver survey</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== PASSENGER FORM (Formspree) ========== -->
        <form id="passengerForm" class="survey-form hidden" action="https://formspree.io/f/xwpwvbde" method="POST">
            <input type="hidden" name="survey-type" value="passenger">
            <div class="progress-container">
                <div class="progress-fill" id="passengerProgress"></div>
            </div>

            <!-- STEP 1/5 -->
            <div class="form-step" id="passengerStep1">
                <div class="form-group">
                    <label>1. Which age group do you fall into?</label>
                    <select name="passenger-age" id="passengerAge" required>
                        <option value="" disabled selected>– select –</option>
                        <option value="18-24">18-24</option>
                        <option value="25-34">25-34</option>
                        <option value="35-44">35-44</option>
                        <option value="45+">45+</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>2. How often do you take a long-distance trip? <br><span style="font-weight:normal; font-size:0.95rem;">(e.g., Kampala–Gulu, Mbarara, Mbale)</span></label>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="passenger-frequency" value="Once a week"> Once a week</label>
                        <label class="radio-option"><input type="radio" name="passenger-frequency" value="2-3 times a month"> 2-3 times a month</label>
                        <label class="radio-option"><input type="radio" name="passenger-frequency" value="Once a month"> Once a month</label>
                        <label class="radio-option"><input type="radio" name="passenger-frequency" value="A few times a year"> A few times a year</label>
                        <label class="radio-option"><input type="radio" name="passenger-frequency" value="Rarely"> Rarely</label>
                    </div>
                </div>
                <div class="form-navigation">
                    <button type="button" class="btn" id="passengerNext1">Next <i class="fas fa-chevron-right"></i></button>
                </div>
            </div>

            <!-- STEP 2/5 -->
            <div class="form-step hidden" id="passengerStep2">
                <div class="form-group">
                    <label>3. Common reason for travel? (select all that apply)</label>
                    <div class="checkbox-group">
                        <label class="checkbox-option"><input type="checkbox" name="passenger-reason" value="Visiting Family"> Visiting Family</label>
                        <label class="checkbox-option"><input type="checkbox" name="passenger-reason" value="Work/Business"> Work/Business</label>
                        <label class="checkbox-option"><input type="checkbox" name="passenger-reason" value="School/University"> School/University</label>
                        <label class="checkbox-option"><input type="checkbox" name="passenger-reason" value="Special Events"> Special Events (weddings, funerals)</label>
                        <label class="checkbox-option">Other: <input type="text" name="passenger-reason-other" placeholder="type..." style="width:70%; margin-left:8px;"></label>
                    </div>
                </div>
                <div class="form-group">
                    <label>4. PRIMARY mode of transport for long trips?</label>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="passenger-transport" value="Public Bus"> Public Bus</label>
                        <label class="radio-option"><input type="radio" name="passenger-transport" value="Shared Taxi"> Shared Taxi</label>
                        <label class="radio-option"><input type="radio" name="passenger-transport" value="Boda Boda"> Boda Boda</label>
                        <label class="radio-option"><input type="radio" name="passenger-transport" value="Private Car"> Private Car</label>
                        <label class="radio-option"><input type="radio" name="passenger-transport" value="Hiring a car"> Hiring a car</label>
                        <label class="radio-option">Other: <input type="text" name="passenger-transport-other" placeholder="specify"></label>
                    </div>
                </div>
                <div class="form-navigation">
                    <button type="button" class="btn" id="passengerPrev2"><i class="fas fa-chevron-left"></i> Previous</button>
                    <button type="button" class="btn" id="passengerNext2">Next <i class="fas fa-chevron-right"></i></button>
                </div>
            </div>

            <!-- STEP 3/5 -->
            <div class="form-step hidden" id="passengerStep3">
                <div class="form-group">
                    <label>5. Satisfaction with your primary transport? (1 = very dissatisfied, 5 = very satisfied)</label>
                    <div class="rating-scale">
                        <div class="rating-option"><label>1</label><input type="radio" name="passenger-satisfaction" value="1"></div>
                        <div class="rating-option"><label>2</label><input type="radio" name="passenger-satisfaction" value="2"></div>
                        <div class="rating-option"><label>3</label><input type="radio" name="passenger-satisfaction" value="3"></div>
                        <div class="rating-option"><label>4</label><input type="radio" name="passenger-satisfaction" value="4"></div>
                        <div class="rating-option"><label>5</label><input type="radio" name="passenger-satisfaction" value="5"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label>6. Biggest frustrations? (select up to 3)</label>
                    <div class="checkbox-group">
                        <label class="checkbox-option"><input type="checkbox" name="passenger-frustrations" value="Unreliable schedules"> Unreliable schedules / long waits</label>
                        <label class="checkbox-option"><input type="checkbox" name="passenger-frustrations" value="Overcrowding"> Overcrowding</label>
                        <label class="checkbox-option"><input type="checkbox" name="passenger-frustrations" value="Safety concerns"> Safety concerns</label>
                        <label class="checkbox-option"><input type="checkbox" name="passenger-frustrations" value="High cost"> High cost</label>
                        <label class="checkbox-option"><input type="checkbox" name="passenger-frustrations" value="Inconvenience"> Inconvenience</label>
                        <label class="checkbox-option"><input type="checkbox" name="passenger-frustrations" value="Lack of flexibility"> Lack of flexibility</label>
                        <label class="checkbox-option">Other: <input type="text" name="passenger-frustrations-other" placeholder="other"></label>
                    </div>
                </div>
                <div class="form-navigation">
                    <button type="button" class="btn" id="passengerPrev3"><i class="fas fa-chevron-left"></i> Previous</button>
                    <button type="button" class="btn" id="passengerNext3">Next <i class="fas fa-chevron-right"></i></button>
                </div>
            </div>

            <!-- STEP 4/5 -->
            <div class="form-step hidden" id="passengerStep4">
                <div class="form-group">
                    <label>7. How important would these features be? (1 = not important, 5 = very important)</label>
                    <p style="font-weight:600; margin:16px 0 4px;">Knowing driver identity & car details in advance</p>
                    <div class="rating-scale">
                        <div class="rating-option"><label>1</label><input type="radio" name="feature-driver" value="1"></div>
                        <div class="rating-option"><label>2</label><input type="radio" name="feature-driver" value="2"></div>
                        <div class="rating-option"><label>3</label><input type="radio" name="feature-driver" value="3"></div>
                        <div class="rating-option"><label>4</label><input type="radio" name="feature-driver" value="4"></div>
                        <div class="rating-option"><label>5</label><input type="radio" name="feature-driver" value="5"></div>
                    </div>
                    <p style="font-weight:600; margin:28px 0 4px;">Door‑to‑door pickup / drop-off</p>
                    <div class="rating-scale">
                        <div class="rating-option"><label>1</label><input type="radio" name="feature-door" value="1"></div>
                        <div class="rating-option"><label>2</label><input type="radio" name="feature-door" value="2"></div>
                        <div class="rating-option"><label>3</label><input type="radio" name="feature-door" value="3"></div>
                        <div class="rating-option"><label>4</label><input type="radio" name="feature-door" value="4"></div>
                        <div class="rating-option"><label>5</label><input type="radio" name="feature-door" value="5"></div>
                    </div>
                </div>
                <div class="form-navigation">
                    <button type="button" class="btn" id="passengerPrev4"><i class="fas fa-chevron-left"></i> Previous</button>
                    <button type="button" class="btn" id="passengerNext4">Next <i class="fas fa-chevron-right"></i></button>
                </div>
            </div>

            <!-- STEP 5/5 -->
            <div class="form-step hidden" id="passengerStep5">
                <div class="form-group">
                    <label>8. If you could book a seat in a private car (safe, reliable, price ~ bus ticket), how likely to try?</label>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="passenger-likely" value="Very Likely"> Very Likely</label>
                        <label class="radio-option"><input type="radio" name="passenger-likely" value="Somewhat Likely"> Somewhat Likely</label>
                        <label class="radio-option"><input type="radio" name="passenger-likely" value="Neutral"> Neutral</label>
                        <label class="radio-option"><input type="radio" name="passenger-likely" value="Somewhat Unlikely"> Somewhat Unlikely</label>
                        <label class="radio-option"><input type="radio" name="passenger-likely" value="Very Unlikely"> Very Unlikely</label>
                    </div>
                </div>
                <div class="form-navigation">
                    <button type="button" class="btn" id="passengerPrev5"><i class="fas fa-chevron-left"></i> Previous</button>
                    <button type="submit" class="btn btn-accent" id="passengerSubmitBtn"><i class="fas fa-paper-plane"></i> Submit & finish</button>
                </div>
            </div>
        </form>

        <!-- ========== DRIVER FORM (Formspree) ========== -->
        <form id="driverForm" class="survey-form hidden" action="https://formspree.io/f/meopekbv" method="POST">
            <input type="hidden" name="survey-type" value="driver">
            <div class="progress-container">
                <div class="progress-fill" id="driverProgress"></div>
            </div>

            <!-- Step 0: validation filter -->
            <div class="form-step" id="driverStep0">
                <div class="form-group">
                    <label>1. Do you currently drive on long-distance trips? (e.g., Kampala–Gulu, Mbarara, Mbale)</label>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="driver-currently-drives" value="Yes"> Yes, I drive such trips myself</label>
                        <label class="radio-option"><input type="radio" name="driver-currently-drives" value="Sometimes"> Sometimes, depending on situation</label>
                        <label class="radio-option"><input type="radio" name="driver-currently-drives" value="No"> No, I don't usually drive those trips</label>
                    </div>
                </div>
                <div class="form-navigation">
                    <button type="button" class="btn" id="driverNext0">Next <i class="fas fa-chevron-right"></i></button>
                </div>
            </div>

            <!-- Step 1: car access -->
            <div class="form-step hidden" id="driverStep1">
                <div class="form-group">
                    <label>2. Do you own or have regular access to a private car?</label>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="driver-car-access" value="Yes"> Yes</label>
                        <label class="radio-option"><input type="radio" name="driver-car-access" value="No"> No</label>
                    </div>
                </div>
                <div class="form-navigation">
                    <button type="button" class="btn" id="driverNext1">Next <i class="fas fa-chevron-right"></i></button>
                </div>
            </div>

            <!-- Step 2: frequency & reason -->
            <div class="form-step hidden" id="driverStep2">
                <div class="form-group">
                    <label>3. How often do you make long-distance trips (≥50km) by car?</label>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="driver-frequency" value="Once a week or more"> Once a week or more</label>
                        <label class="radio-option"><input type="radio" name="driver-frequency" value="2-3 times a month"> 2-3 times a month</label>
                        <label class="radio-option"><input type="radio" name="driver-frequency" value="Once a month"> Once a month</label>
                        <label class="radio-option"><input type="radio" name="driver-frequency" value="A few times a year"> A few times a year</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>4. Most common reason for long trips?</label>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="driver-reason" value="Work/Business Commute"> Work/Business Commute</label>
                        <label class="radio-option"><input type="radio" name="driver-reason" value="Visiting Family/Friends"> Visiting Family/Friends</label>
                        <label class="radio-option"><input type="radio" name="driver-reason" value="Personal Errands"> Personal Errands</label>
                        <label class="checkbox-option">Other: <input type="text" name="driver-reason-other" placeholder="other"></label>
                    </div>
                </div>
                <div class="form-navigation">
                    <button type="button" class="btn" id="driverPrev2"><i class="fas fa-chevron-left"></i> Previous</button>
                    <button type="button" class="btn" id="driverNext2">Next <i class="fas fa-chevron-right"></i></button>
                </div>
            </div>

            <!-- Step 3: empty seats & given lift -->
            <div class="form-step hidden" id="driverStep3">
                <div class="form-group">
                    <label>5. How often do you have empty seats in your car on these trips?</label>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="driver-empty-seats" value="Almost Always"> Almost Always</label>
                        <label class="radio-option"><input type="radio" name="driver-empty-seats" value="Often"> Often</label>
                        <label class="radio-option"><input type="radio" name="driver-empty-seats" value="Sometimes"> Sometimes</label>
                        <label class="radio-option"><input type="radio" name="driver-empty-seats" value="Rarely"> Rarely</label>
                        <label class="radio-option"><input type="radio" name="driver-empty-seats" value="Never"> Never</label>
                    </div>
                </div>
                <div class="form-group">
                    <label>6. Ever given a lift to someone you didn't know well for a long trip?</label>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="driver-given-lift" value="Yes"> Yes</label>
                        <label class="radio-option"><input type="radio" name="driver-given-lift" value="No"> No</label>
                    </div>
                </div>
                <div class="form-navigation">
                    <button type="button" class="btn" id="driverPrev3"><i class="fas fa-chevron-left"></i> Previous</button>
                    <button type="button" class="btn" id="driverNext3">Next <i class="fas fa-chevron-right"></i></button>
                </div>
            </div>

            <!-- Step 4: interest share -->
            <div class="form-step hidden" id="driverStep4">
                <div class="form-group">
                    <label>7. If you could safely find people heading same way, interest in offering ride to share fuel costs?</label>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="driver-interest-share" value="Very Interested"> Very Interested</label>
                        <label class="radio-option"><input type="radio" name="driver-interest-share" value="Somewhat Interested"> Somewhat Interested</label>
                        <label class="radio-option"><input type="radio" name="driver-interest-share" value="Neutral"> Neutral</label>
                        <label class="radio-option"><input type="radio" name="driver-interest-share" value="Not Very Interested"> Not Very Interested</label>
                        <label class="radio-option"><input type="radio" name="driver-interest-share" value="Not Interested at All"> Not Interested at All</label>
                    </div>
                </div>
                <div class="form-navigation">
                    <button type="button" class="btn" id="driverPrev4"><i class="fas fa-chevron-left"></i> Previous</button>
                    <button type="button" class="btn" id="driverNext4">Next <i class="fas fa-chevron-right"></i></button>
                </div>
            </div>

            <!-- Step 5: concerns (max 3) -->
            <div class="form-step hidden" id="driverStep5">
                <div class="form-group">
                    <label>8. Biggest CONCERNS about offering rides? (select up to 3)</label>
                    <div class="checkbox-group">
                        <label class="checkbox-option"><input type="checkbox" name="driver-concerns" value="Safety & Security"> Safety & Security (stranger)</label>
                        <label class="checkbox-option"><input type="checkbox" name="driver-concerns" value="Reliability of passengers"> Reliability (no‑shows)</label>
                        <label class="checkbox-option"><input type="checkbox" name="driver-concerns" value="Payment issues"> Payment issues</label>
                        <label class="checkbox-option"><input type="checkbox" name="driver-concerns" value="Inconvenience"> Inconvenience (out of route)</label>
                        <label class="checkbox-option"><input type="checkbox" name="driver-concerns" value="Liability"> Liability in accident</label>
                        <label class="checkbox-option">Other: <input type="text" name="driver-concerns-other" placeholder="other"></label>
                    </div>
                </div>
                <div class="form-navigation">
                    <button type="button" class="btn" id="driverPrev5"><i class="fas fa-chevron-left"></i> Previous</button>
                    <button type="button" class="btn" id="driverNext5">Next <i class="fas fa-chevron-right"></i></button>
                </div>
            </div>

            <!-- Step 6: comfort features & submit -->
            <div class="form-step hidden" id="driverStep6">
                <div class="form-group">
                    <label>9. What features would make you comfortable sharing a ride? (all that apply)</label>
                    <div class="checkbox-group">
                        <label class="checkbox-option"><input type="checkbox" name="driver-features" value="Knowing identity"> Know passenger identity in advance</label>
                        <label class="checkbox-option"><input type="checkbox" name="driver-features" value="Confirmed payment"> Confirmed payment before trip</label>
                        <label class="checkbox-option"><input type="checkbox" name="driver-features" value="Choose passengers"> Choose my passengers</label>
                        <label class="checkbox-option"><input type="checkbox" name="driver-features" value="Vetting"> System vets drivers & passengers</label>
                        <label class="checkbox-option"><input type="checkbox" name="driver-features" value="Clear rules"> Clear terms of service</label>
                    </div>
                </div>
                <div class="form-navigation">
                    <button type="button" class="btn" id="driverPrev6"><i class="fas fa-chevron-left"></i> Previous</button>
                    <button type="submit" class="btn btn-accent"><i class="fas fa-paper-plane"></i> Submit survey</button>
                </div>
            </div>
        </form>

        <!-- THANK YOU SCREEN -->
        <div id="thankYouScreen" class="thank-you-panel hidden">
            <i class="fas fa-circle-check"></i>
            <h2>Webale! / Thank you!</h2>
            <p>Your answers are recorded — they will directly help our transportation research in Uganda.</p>
            <button class="btn" id="newSurveyBtn"><i class="fas fa-redo-alt"></i> Take another survey</button>
        </div>

        <footer>
            <p><i class="fas fa-lock"></i> Anonymous & confidential • Makerere University transport study • 2025</p>
        </footer>
    </div>

    <script>
        (function() {
            "use strict";

            // ----- UI panels -----
            const homeScreen = document.getElementById('homeScreen');
            const passengerForm = document.getElementById('passengerForm');
            const driverForm = document.getElementById('driverForm');
            const thankYou = document.getElementById('thankYouScreen');

            // ----- Passenger steps -----
            const pSteps = [
                document.getElementById('passengerStep1'),
                document.getElementById('passengerStep2'),
                document.getElementById('passengerStep3'),
                document.getElementById('passengerStep4'),
                document.getElementById('passengerStep5')
            ];
            const pProgress = document.getElementById('passengerProgress');

            function showPassengerStep(index) {
                pSteps.forEach((step, i) => {
                    step.classList.toggle('hidden', i !== index);
                });
                let percent = ((index + 1) / pSteps.length) * 100;
                pProgress.style.width = percent + '%';
            }

            // ----- Driver steps -----
            const dSteps = [
                document.getElementById('driverStep0'),
                document.getElementById('driverStep1'),
                document.getElementById('driverStep2'),
                document.getElementById('driverStep3'),
                document.getElementById('driverStep4'),
                document.getElementById('driverStep5'),
                document.getElementById('driverStep6')
            ];
            const dProgress = document.getElementById('driverProgress');

            function showDriverStep(index) {
                dSteps.forEach((step, i) => {
                    step.classList.toggle('hidden', i !== index);
                });
                let percent = ((index + 1) / dSteps.length) * 100;
                dProgress.style.width = percent + '%';
            }

            // ----- Reset all forms, go home -----
            function resetToHome() {
                homeScreen.classList.remove('hidden');
                passengerForm.classList.add('hidden');
                driverForm.classList.add('hidden');
                thankYou.classList.add('hidden');

                // reset passenger form
                passengerForm.reset();
                showPassengerStep(0);
                // reset driver form
                driverForm.reset();
                showDriverStep(0);
            }

            // ----- START Passenger -----
            document.getElementById('startPassengerBtn').addEventListener('click', function(e) {
                e.preventDefault();
                homeScreen.classList.add('hidden');
                passengerForm.classList.remove('hidden');
                driverForm.classList.add('hidden');
                thankYou.classList.add('hidden');
                showPassengerStep(0);
            });

            // Passenger navigation
            document.getElementById('passengerNext1').addEventListener('click', function() {
                const age = document.getElementById('passengerAge').value;
                const freq = document.querySelector('input[name="passenger-frequency"]:checked');
                if (!age || !freq) {
                    alert('Please select your age group and travel frequency.');
                    return;
                }
                showPassengerStep(1);
            });
            document.getElementById('passengerNext2').addEventListener('click', function() {
                const transport = document.querySelector('input[name="passenger-transport"]:checked');
                if (!transport) {
                    alert('Please select a primary mode of transport.');
                    return;
                }
                showPassengerStep(2);
            });
            document.getElementById('passengerNext3').addEventListener('click', function() {
                const satisfaction = document.querySelector('input[name="passenger-satisfaction"]:checked');
                if (!satisfaction) {
                    alert('Please rate your satisfaction.');
                    return;
                }
                showPassengerStep(3);
            });
            document.getElementById('passengerNext4').addEventListener('click', function() {
                const featDriver = document.querySelector('input[name="feature-driver"]:checked');
                const featDoor = document.querySelector('input[name="feature-door"]:checked');
                if (!featDriver || !featDoor) {
                    alert('Please rate both features (driver ID & door-to-door).');
                    return;
                }
                showPassengerStep(4);
            });

            // Previous buttons
            document.getElementById('passengerPrev2').addEventListener('click', function() { showPassengerStep(0); });
            document.getElementById('passengerPrev3').addEventListener('click', function() { showPassengerStep(1); });
            document.getElementById('passengerPrev4').addEventListener('click', function() { showPassengerStep(2); });
            document.getElementById('passengerPrev5').addEventListener('click', function() { showPassengerStep(3); });

            // Passenger submit validation
            passengerForm.addEventListener('submit', function(e) {
                const likely = document.querySelector('input[name="passenger-likely"]:checked');
                if (!likely) {
                    e.preventDefault();
                    alert('Please answer if you would try booking a seat in a private car.');
                    return;
                }
                // show thank you after submit
                setTimeout(() => {
                    passengerForm.classList.add('hidden');
                    thankYou.classList.remove('hidden');
                    homeScreen.classList.add('hidden');
                    driverForm.classList.add('hidden');
                }, 50); // let formspree start sending
            });

            // ----- DRIVER start -----
            document.getElementById('startDriverBtn').addEventListener('click', function(e) {
                e.preventDefault();
                homeScreen.classList.add('hidden');
                driverForm.classList.remove('hidden');
                passengerForm.classList.add('hidden');
                thankYou.classList.add('hidden');
                showDriverStep(0);
            });

            // Driver navigation with filter logic
            document.getElementById('driverNext0').addEventListener('click', function() {
                const drives = document.querySelector('input[name="driver-currently-drives"]:checked');
                if (!drives) { alert('Select an option.'); return; }
                if (drives.value === 'No') {
                    // not a driver → thank you
                    driverForm.classList.add('hidden');
                    thankYou.classList.remove('hidden');
                    homeScreen.classList.add('hidden');
                } else {
                    showDriverStep(1);
                }
            });

            document.getElementById('driverNext1').addEventListener('click', function() {
                const access = document.querySelector('input[name="driver-car-access"]:checked');
                if (!access) { alert('Please answer if you have access to a car.'); return; }
                if (access.value === 'No') {
                    driverForm.classList.add('hidden');
                    thankYou.classList.remove('hidden');
                    homeScreen.classList.add('hidden');
                } else {
                    showDriverStep(2);
                }
            });

            document.getElementById('driverNext2').addEventListener('click', function() {
                const freq = document.querySelector('input[name="driver-frequency"]:checked');
                const reason = document.querySelector('input[name="driver-reason"]:checked');
                if (!freq || !reason) { alert('Please answer both frequency and reason.'); return; }
                showDriverStep(3);
            });
            document.getElementById('driverNext3').addEventListener('click', function() {
                const empty = document.querySelector('input[name="driver-empty-seats"]:checked');
                const lift = document.querySelector('input[name="driver-given-lift"]:checked');
                if (!empty || !lift) { alert('Please answer both questions.'); return; }
                showDriverStep(4);
            });
            document.getElementById('driverNext4').addEventListener('click', function() {
                const interest = document.querySelector('input[name="driver-interest-share"]:checked');
                if (!interest) { alert('Please indicate your interest level.'); return; }
                showDriverStep(5);
            });
            document.getElementById('driverNext5').addEventListener('click', function() {
                // concerns optional
                showDriverStep(6);
            });

            // Driver previous
            document.getElementById('driverPrev2').addEventListener('click', function() { showDriverStep(1); });
            document.getElementById('driverPrev3').addEventListener('click', function() { showDriverStep(2); });
            document.getElementById('driverPrev4').addEventListener('click', function() { showDriverStep(3); });
            document.getElementById('driverPrev5').addEventListener('click', function() { showDriverStep(4); });
            document.getElementById('driverPrev6').addEventListener('click', function() { showDriverStep(5); });

            // Driver submit → thank you
            driverForm.addEventListener('submit', function(e) {
                // optional features, no extra validation needed
                setTimeout(() => {
                    driverForm.classList.add('hidden');
                    thankYou.classList.remove('hidden');
                    homeScreen.classList.add('hidden');
                    passengerForm.classList.add('hidden');
                }, 50);
            });

            // ----- New survey (take another) -----
            document.getElementById('newSurveyBtn').addEventListener('click', resetToHome);
            // Also from the thank you button
            document.getElementById('newSurveyBtn').addEventListener('click', resetToHome);

            // Extra: if someone clicks passenger card or driver card (whole card)
            document.getElementById('choosePassengerCard').addEventListener('click', function(e) {
                if (!e.target.closest('button')) {
                    document.getElementById('startPassengerBtn').click();
                }
            });
            document.getElementById('chooseDriverCard').addEventListener('click', function(e) {
                if (!e.target.closest('button')) {
                    document.getElementById('startDriverBtn').click();
                }
            });

            // Initial progress set
            showPassengerStep(0);
            showDriverStep(0);
        })();
    </script>

    <!-- ensure hidden class works -->
    <style>
        .hidden { display: none !important; }
    </style>
</body>
</html>